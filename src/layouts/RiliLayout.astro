---
import type { HTMLTag } from "astro/types";
import BaseLayout from "./BaseLayout.astro";

const {
  title,
  description,
  head,
  className,
  isFixed = true,
  image,
}: {
  title?: string;
  description?: string;
  head?: HTMLTag;
  // @ts-ignore
  isFixed?: boolean;
  className?: string;
  image?: string;
} = Astro.props;

// Better auth (hopefully)
const secretStr =
  "0PqxxoNmRBwZj3eZ9ud8hYgLEKcUHfqRHOeMZW0UTKm1fvMEXZNJlWkzpcqc251FezBq89ILkBq3v7YqdPnDrnVBpAFmLWVXjxSoglaUjJsFwvALfgvGSiAI9infpLIa";

if (Astro.cookies.has("password")) {
  const cookie = Astro.cookies.get("password");

  if (cookie.value !== secretStr) {
    return (Astro.response.status = 401);
  }
} else {
  return (Astro.response.status = 401);
}
---

<BaseLayout
  title={title}
  description={description}
  head={head}
  className={className}
  isFixed={isFixed}
  image={image}
>
  <slot />
</BaseLayout>
